

<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Harmonic Synthesis Results &#8212; Introduction to Audio Synthesizer Programming</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=365ca57ee442770a23c6" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=365ca57ee442770a23c6" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=365ca57ee442770a23c6" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=365ca57ee442770a23c6"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'synths/harmonic_results';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Differentiable Synthesis Libraries" href="libraries.html" />
    <link rel="prev" title="Optimizing a Harmonic Synthesizer" href="harmonic_optimize.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/intro2ddsp_logo_horiz.png" class="logo__image only-light" alt="Introduction to Audio Synthesizer Programming - Home"/>
    <script>document.write(`<img src="../_static/intro2ddsp_logo_horiz.png" class="logo__image only-dark" alt="Introduction to Audio Synthesizer Programming - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Introduction
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Background</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../background/neural-audio-synthesis.html">Neural Audio Synthesis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/what-is-ddsp.html">What is DDSP?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../background/tasks_applications.html">Tasks and Applications</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">First Steps</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../first-steps/pytorch_tutorial.html">PyTorch Bootcamp</a></li>
<li class="toctree-l1"><a class="reference internal" href="../first-steps/diff_gain.html">A Differentiable Gain Control</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Synthesisers</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Digital Synthesizer Modelling</a></li>
<li class="toctree-l1"><a class="reference internal" href="oscillator.html">Writing an Oscillator in PyTorch</a></li>
<li class="toctree-l1"><a class="reference internal" href="additive.html">Additive Synthesis</a></li>
<li class="toctree-l1"><a class="reference internal" href="harmonic_optimize.html">Optimizing a Harmonic Synthesizer</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Harmonic Synthesis Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="libraries.html">Differentiable Synthesis Libraries</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Filters</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../filters/index.html">Digital Filter Modelling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filters/fir-intro.html">Finite Impulse Response</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filters/fir-optim.html">Differentiable FIR Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filters/iir_intro.html">Infinite Impulse Response (IIR) Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filters/iir_impl.html">Differentiable Implementation of IIR Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filters/iir_torch.html">Implementing Differentiable IIR in PyTorch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filters/sf.html">Speech Decomposition with Source Filter Model</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Physical Modeling</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../physical-modeling/index.html">Physical Modeling and DDSP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../physical-modeling/sho.html">The Simple Harmonic Oscillator</a></li>
<li class="toctree-l1"><a class="reference internal" href="../physical-modeling/many_oscillators.html">Rigid objects and modal analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../physical-modeling/wave_equation.html">The Wave Equation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Wrapping Up</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">Bibliography</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/benhayes/intro2ddsp" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/benhayes/intro2ddsp/issues/new?title=Issue%20on%20page%20%2Fsynths/harmonic_results.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/synths/harmonic_results.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Harmonic Synthesis Results</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crepe-pitch-extraction">Crepe Pitch Extraction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#saxophone">Saxophone</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#target">Target</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#result">Result</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#guitar">Guitar</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Target</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Result</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#challenges-onsets-and-transients">Challenges: Onsets and Transients</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#violin">Violin</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">Target</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">Result</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#voice">Voice</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">Target</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">Result</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#challenges-noise-room-sounds-chorusing">Challenges: Noise, Room Sounds, Chorusing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#drum">Drum</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">Target</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">Result</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#challenges-complex-non-harmonic-sounds">Challenges: Complex non-harmonic sounds</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="harmonic-synthesis-results">
<h1>Harmonic Synthesis Results<a class="headerlink" href="#harmonic-synthesis-results" title="Permalink to this heading">#</a></h1>
<p>Let’s see some more sound match examples with our differentiable harmonic synthesizer.</p>
<section id="crepe-pitch-extraction">
<h2>Crepe Pitch Extraction<a class="headerlink" href="#crepe-pitch-extraction" title="Permalink to this heading">#</a></h2>
<p>The Crepe pitch extraction algorithm <span id="id1">[<a class="reference internal" href="#id43" title="Jong Wook Kim, Justin Salamon, Peter Li, and Juan Pablo Bello. Crepe: a convolutional representation for pitch estimation. In 2018 IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP), 161–165. IEEE, 2018.">KSLB18</a>]</span> was used in the original work by <span id="id2">[<a class="reference internal" href="introduction.html#id14" title="Jesse Engel, Lamtharn (Hanoi) Hantrakul, Chenjie Gu, and Adam Roberts. DDSP: Differentiable Digital Signal Processing. In 8th International Conference on Learning Representations. April 2020.">EHGR20</a>]</span> and provides a more accurate and richer fundamental frequency envelope. This can help improve the final results of synthesis.</p>
<p>Crepe can be installed from <a class="reference external" href="https://pypi.org/project/crepe/">PyPi</a>. We replaced <code class="docutils literal notranslate"><span class="pre">functional.detect_pitch_frequency</span></code> with <code class="docutils literal notranslate"><span class="pre">crepe.predict</span></code> to produce the examples in these book.</p>
<p>The code for that is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">frame_ms</span> <span class="o">=</span> <span class="mf">10.0</span>
<span class="n">_</span><span class="p">,</span> <span class="n">f0</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">crepe</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span>
    <span class="n">audio</span><span class="o">.</span><span class="n">numpy</span><span class="p">()[</span><span class="mi">0</span><span class="p">],</span> <span class="n">sample_rate</span><span class="p">,</span> <span class="n">step_size</span><span class="o">=</span><span class="n">frame_ms</span><span class="p">,</span> <span class="n">viterbi</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
<span class="n">f0</span> <span class="o">=</span> <span class="n">torch</span><span class="o">.</span><span class="n">from_numpy</span><span class="p">(</span><span class="n">f0</span><span class="p">)</span><span class="o">.</span><span class="n">unsqueeze</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Comparison of fundamental frequency envelopes</strong>
<img width="100%" src="../_static/images/crepe_torchaudio_f0.png"></img></p>
</section>
<section id="saxophone">
<h2>Saxophone<a class="headerlink" href="#saxophone" title="Permalink to this heading">#</a></h2>
<section id="target">
<h3>Target<a class="headerlink" href="#target" title="Permalink to this heading">#</a></h3>
<p><img width="100%" src="../_static/images/sax_target_f0.png"></img></p>
<audio controls>
    <source src="../_static/audio/reed_acoustic_target.wav" type="audio/wav">
</audio>
</section>
<section id="result">
<h3>Result<a class="headerlink" href="#result" title="Permalink to this heading">#</a></h3>
<p><video width="100%" src="../_static/videos/sax-ddsp-torchaudio.mp4" controls loop></video>
<audio controls>
<source src="../_static/audio/reed_acoustic_result.wav" type="audio/wav">
</audio></p>
</section>
</section>
<section id="guitar">
<h2>Guitar<a class="headerlink" href="#guitar" title="Permalink to this heading">#</a></h2>
<section id="id3">
<h3>Target<a class="headerlink" href="#id3" title="Permalink to this heading">#</a></h3>
<p><img width="100%" src="../_static/images/guitar_target_f0.png"></img></p>
<audio controls>
    <source src="../_static/audio/guitar_acoustic_target.wav" type="audio/wav">
</audio>
</section>
<section id="id4">
<h3>Result<a class="headerlink" href="#id4" title="Permalink to this heading">#</a></h3>
<p><video width="100%" src="../_static/videos/guitar-ddsp-torchaudio.mp4" controls loop></video>
<audio controls>
<source src="../_static/audio/guitar_acoustic_result.wav" type="audio/wav">
</audio></p>
</section>
</section>
<section id="challenges-onsets-and-transients">
<h2>Challenges: Onsets and Transients<a class="headerlink" href="#challenges-onsets-and-transients" title="Permalink to this heading">#</a></h2>
<p>If you listen to the very beginning of the synthesized results, especially in the guitar, you’ll hear that it is
missing the sharp pluck. The onset has been smoothed out by our harmonic synthesizer.
The onset, or <strong>transient</strong>, portion of a signal is defined by abrupt changes in amplitude, phase, or frequency information.
Sinusoidal/harmonic synthesis does not work well for these signal
components. Transient modelling has been a topic of recent research in DDSP synthesis
focused on sound effect modelling <span id="id5">[<a class="reference internal" href="#id22" title="Adrián Barahona-Ríos and Tom Collins. NoiseBandNet: Controllable Time-Varying Neural Synthesis of Sound Effects Using Filterbanks. July 2023. doi:10.48550/arXiv.2307.08007.">BarahonaRiosC23</a>]</span><span id="id6">[<a class="reference internal" href="#id45" title="Yunyi Liu, Craig Jin, and David Gunawan. Ddsp-sfx: acoustically-guided sound effects generation with differentiable digital signal processing. arXiv preprint arXiv:2309.08060, 2023.">LJG23</a>]</span> and drum synthesis <span id="id7">[<a class="reference internal" href="#id57" title="Jordie Shier, Franco Caspe, Andrew Robertson, Mark Sandler, Charalampos Saitis, and Andrew McPherson. Differentiable modelling of percussive audio with transient and spectral synthesis. In Proceedings of the 10th Convention of the European Acoustics Association Forum Acusticum 2023. 2023.">SCR+23</a>]</span>.</p>
</section>
<section id="violin">
<h2>Violin<a class="headerlink" href="#violin" title="Permalink to this heading">#</a></h2>
<section id="id8">
<h3>Target<a class="headerlink" href="#id8" title="Permalink to this heading">#</a></h3>
<p><img width="100%" src="../_static/images/string_target_f0.png"></img></p>
<audio controls>
    <source src="../_static/audio/string_acoustic_target.wav" type="audio/wav">
</audio>
</section>
<section id="id9">
<h3>Result<a class="headerlink" href="#id9" title="Permalink to this heading">#</a></h3>
<p><video width="100%" src="../_static/videos/string-ddsp-torchaudio.mp4" controls loop></video>
<audio controls>
<source src="../_static/audio/string_acoustic_result.wav" type="audio/wav">
</audio></p>
</section>
</section>
<section id="voice">
<h2>Voice<a class="headerlink" href="#voice" title="Permalink to this heading">#</a></h2>
<section id="id10">
<h3>Target<a class="headerlink" href="#id10" title="Permalink to this heading">#</a></h3>
<p><img width="100%" src="../_static/images/vocal_target_f0.png"></img></p>
<audio controls>
    <source src="../_static/audio/vocal_target.wav" type="audio/wav">
</audio>
</section>
<section id="id11">
<h3>Result<a class="headerlink" href="#id11" title="Permalink to this heading">#</a></h3>
<p><video width="100%" src="../_static/videos/vocal-ddsp-torchaudio.mp4" controls loop></video>
<audio controls>
<source src="../_static/audio/vocal_result.wav" type="audio/wav">
</audio></p>
</section>
</section>
<section id="challenges-noise-room-sounds-chorusing">
<h2>Challenges: Noise, Room Sounds, Chorusing<a class="headerlink" href="#challenges-noise-room-sounds-chorusing" title="Permalink to this heading">#</a></h2>
<p>In the violin and voice synthesis results, we can hear some choppiness and distortion.
Inspecting the spectrograms of the targets we can see that there is significant signal
energy in between the prominent harmonics. We can attribute these signal components to a
number of factors. In the violin there is extra noise produced from the bow string. There
is also room reverbation present in both these signals that cause a spectral smearing effect.</p>
<p>We can hear distortion in the synthesized signal, which may be created by the optimizer in an
attempt to minimize the error from these noisy/reverberant signal components with respect to the multi-resolution
spectral loss. Both noise and room reverberation were addressed by <span id="id12">Engel <em>et al.</em> [<a class="reference internal" href="introduction.html#id14" title="Jesse Engel, Lamtharn (Hanoi) Hantrakul, Chenjie Gu, and Adam Roberts. DDSP: Differentiable Digital Signal Processing. In 8th International Conference on Learning Representations. April 2020.">EHGR20</a>]</span>
through the introduction of specialized DDSP modules.</p>
<p>We can also hear in the voice sample that there may be more than one voice present, creating
a chorus-effect, which are slight pitch deviations between the different voices. This is
more challenging phenomenon to reproduce. We could try to add more instances of our
harmonic synthesizer with slight pitch deviations between the instances. This approach could
be thought of as polyphonic rendering, a topic that was explored in the context of piano
synthesis by <span id="id13">Renault <em>et al.</em> [<a class="reference internal" href="#id53" title="Lenny Renault, Rémi Mignot, and Axel Roebel. Differentiable Piano Model for Midi-to-Audio Performance Synthesis. In Proceedings of the 25th International Conference on Digital Audio Effects, 8. Vienna, Austria, 2022.">RMR22</a>]</span>. Another approach could be to add a <strong>chorus</strong> audio effect
to the output of our synthesizer which attempts to mimic the perceptual effect of multiple
monophonic sources. Differentiable chorus effects were explored by <span id="id14">Masuda and Saito [<a class="reference internal" href="#id47" title="Naotake Masuda and Daisuke Saito. Improving Semi-Supervised Differentiable Synthesizer Sound Matching for Practical Applications. IEEE/ACM Transactions on Audio, Speech, and Language Processing, 31:863–875, 2023. doi:10.1109/TASLP.2023.3237161.">MS23</a>]</span>.</p>
</section>
<section id="drum">
<h2>Drum<a class="headerlink" href="#drum" title="Permalink to this heading">#</a></h2>
<section id="id15">
<h3>Target<a class="headerlink" href="#id15" title="Permalink to this heading">#</a></h3>
<p><img width="100%" src="../_static/images/drum_target_f0.png"></img></p>
<audio controls>
    <source src="../_static/audio/drum_target.wav" type="audio/wav">
</audio>
</section>
<section id="id16">
<h3>Result<a class="headerlink" href="#id16" title="Permalink to this heading">#</a></h3>
<p><video width="100%" src="../_static/videos/drum-ddsp-torchaudio.mp4" controls loop></video>
<audio controls>
<source src="../_static/audio/drum_result.wav" type="audio/wav">
</audio></p>
</section>
</section>
<section id="challenges-complex-non-harmonic-sounds">
<h2>Challenges: Complex non-harmonic sounds<a class="headerlink" href="#challenges-complex-non-harmonic-sounds" title="Permalink to this heading">#</a></h2>
<p>Our harmonic synthesizer worked surprisingly well on this drum sound given the increase
in complexity! Although, we can hear clearly that there is significant distortion in
the results. Along with the challenges previously mentioned (i.e., transients, noise, room reverb),
we also have to contend with non-harmonic partials in drum sounds. So, it is not
surprising that our harmonic synthesizer failed to model this sound!</p>
<p>Let’s look a bit more closely at the problem:
<img width="100%" src="../_static/images/drum_harmonic_overlay.png"></img>
<img width="100%" src="../_static/images/drum_optimized.png"></img></p>
<p>Both figures on the left are spectrograms of the target drum sound. The right top shows
the target spectrogram with an overlay of the first 16 harmonics of the fundamental frequency and
the bottom right shows the spectrogram of our synthesizer after optimization.</p>
<p>It looks like
the first and second harmonic partials line up with partials in the drum sound, but the
remaining partials are much less clear.</p>
<p>There is significant energy in partials that
have non-harmonic relationships with the fundamental.
We hear our optimizer
has struggled to deal with this extra energy and has created distorted amplitude envelopes,
potentially in attempt to contend with this.</p>
<p><strong>So what’s the solution?</strong> Ideally, we would let the optimizer pick the correct frequencies
for our partials. But, if you recall from <a class="reference internal" href="oscillator.html#sinusoidal-optimizing-challenge"><span class="std std-ref">earlier</span></a>, this
is a challenging, non-convex problem.</p>
<p>Recent work has begun to tackle this problem.
<span id="id17">Hayes <em>et al.</em> [<a class="reference internal" href="#id38" title="Ben Hayes, Charalampos Saitis, and György Fazekas. Sinusoidal frequency estimation by gradient descent. In ICASSP 2023-2023 IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP), 1–5. IEEE, 2023.">HSF23</a>]</span> proposed a surrogate approach for frequency estimation using
gradient descent, which may enable direct optimization of non-harmonic sinusoidal frequencies.
<span id="id18">Diaz <em>et al.</em> [<a class="reference internal" href="#id28" title="Rodrigo Diaz, Ben Hayes, Charalampos Saitis, György Fazekas, and Mark Sandler. Rigid-body sound synthesis with differentiable modal resonators. In IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP). IEEE, 2023.">DHS+23</a>]</span> learned to model non-harmonic partials of rigid-body
percussion sounds differentiably using banks of IIR resonators.
Alternatively, estimation of non-harmonic partials can be offloaded to a pre-processing step,
as was the case in the hybrid drum synthesis method proposed by <span id="id19">Shier <em>et al.</em> [<a class="reference internal" href="#id57" title="Jordie Shier, Franco Caspe, Andrew Robertson, Mark Sandler, Charalampos Saitis, and Andrew McPherson. Differentiable modelling of percussive audio with transient and spectral synthesis. In Proceedings of the 10th Convention of the European Acoustics Association Forum Acusticum 2023. 2023.">SCR+23</a>]</span>.</p>
</section>
<section id="summary">
<h2>Summary<a class="headerlink" href="#summary" title="Permalink to this heading">#</a></h2>
<p>This concludes our implementation and exploration of a differentiable harmonic synthesizer.
We’ve seen that this synthesizer is capable of modelling quite a wide range of harmonic
instrumental sounds.
We saw that as our target became more complicated, we started hear errors in the harmonic synthesis results.
In practice, the harmonic synthesizer
is one component in a larger system.
The addition of different DDSP modules and variations on this
harmonic synthesizer will enable us to model different acoustical atteributes.</p>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this heading">#</a></h2>
<div class="docutils container" id="id20">
<dl class="citation">
<dt class="label" id="id28"><span class="brackets"><a class="fn-backref" href="#id18">DHS+23</a></span></dt>
<dd><p>Rodrigo Diaz, Ben Hayes, Charalampos Saitis, György Fazekas, and Mark Sandler. Rigid-body sound synthesis with differentiable modal resonators. In <em>IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP)</em>. IEEE, 2023.</p>
</dd>
<dt class="label" id="id29"><span class="brackets">EHGR20</span><span class="fn-backref">(<a href="#id2">1</a>,<a href="#id12">2</a>)</span></dt>
<dd><p>Jesse Engel, Lamtharn (Hanoi) Hantrakul, Chenjie Gu, and Adam Roberts. DDSP: Differentiable Digital Signal Processing. In <em>8th International Conference on Learning Representations</em>. April 2020.</p>
</dd>
<dt class="label" id="id38"><span class="brackets"><a class="fn-backref" href="#id17">HSF23</a></span></dt>
<dd><p>Ben Hayes, Charalampos Saitis, and György Fazekas. Sinusoidal frequency estimation by gradient descent. In <em>ICASSP 2023-2023 IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP)</em>, 1–5. IEEE, 2023.</p>
</dd>
<dt class="label" id="id43"><span class="brackets"><a class="fn-backref" href="#id1">KSLB18</a></span></dt>
<dd><p>Jong Wook Kim, Justin Salamon, Peter Li, and Juan Pablo Bello. Crepe: a convolutional representation for pitch estimation. In <em>2018 IEEE International Conference on Acoustics, Speech and Signal Processing (ICASSP)</em>, 161–165. IEEE, 2018.</p>
</dd>
<dt class="label" id="id45"><span class="brackets"><a class="fn-backref" href="#id6">LJG23</a></span></dt>
<dd><p>Yunyi Liu, Craig Jin, and David Gunawan. Ddsp-sfx: acoustically-guided sound effects generation with differentiable digital signal processing. <em>arXiv preprint arXiv:2309.08060</em>, 2023.</p>
</dd>
<dt class="label" id="id47"><span class="brackets"><a class="fn-backref" href="#id14">MS23</a></span></dt>
<dd><p>Naotake Masuda and Daisuke Saito. Improving Semi-Supervised Differentiable Synthesizer Sound Matching for Practical Applications. <em>IEEE/ACM Transactions on Audio, Speech, and Language Processing</em>, 31:863–875, 2023. <a class="reference external" href="https://doi.org/10.1109/TASLP.2023.3237161">doi:10.1109/TASLP.2023.3237161</a>.</p>
</dd>
<dt class="label" id="id53"><span class="brackets"><a class="fn-backref" href="#id13">RMR22</a></span></dt>
<dd><p>Lenny Renault, Rémi Mignot, and Axel Roebel. Differentiable Piano Model for Midi-to-Audio Performance Synthesis. In <em>Proceedings of the 25th International Conference on Digital Audio Effects</em>, 8. Vienna, Austria, 2022.</p>
</dd>
<dt class="label" id="id57"><span class="brackets">SCR+23</span><span class="fn-backref">(<a href="#id7">1</a>,<a href="#id19">2</a>)</span></dt>
<dd><p>Jordie Shier, Franco Caspe, Andrew Robertson, Mark Sandler, Charalampos Saitis, and Andrew McPherson. Differentiable modelling of percussive audio with transient and spectral synthesis. In <em>Proceedings of the 10th Convention of the European Acoustics Association Forum Acusticum 2023</em>. 2023.</p>
</dd>
<dt class="label" id="id22"><span class="brackets"><a class="fn-backref" href="#id5">BarahonaRiosC23</a></span></dt>
<dd><p>Adrián Barahona-Ríos and Tom Collins. NoiseBandNet: Controllable Time-Varying Neural Synthesis of Sound Effects Using Filterbanks. July 2023. <a class="reference external" href="https://doi.org/10.48550/arXiv.2307.08007">doi:10.48550/arXiv.2307.08007</a>.</p>
</dd>
</dl>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./synths"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="harmonic_optimize.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Optimizing a Harmonic Synthesizer</p>
      </div>
    </a>
    <a class="right-next"
       href="libraries.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Differentiable Synthesis Libraries</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#crepe-pitch-extraction">Crepe Pitch Extraction</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#saxophone">Saxophone</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#target">Target</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#result">Result</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#guitar">Guitar</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Target</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Result</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#challenges-onsets-and-transients">Challenges: Onsets and Transients</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#violin">Violin</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">Target</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">Result</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#voice">Voice</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">Target</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">Result</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#challenges-noise-room-sounds-chorusing">Challenges: Noise, Room Sounds, Chorusing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#drum">Drum</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">Target</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">Result</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#challenges-complex-non-harmonic-sounds">Challenges: Complex non-harmonic sounds</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summary">Summary</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#references">References</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Ben Hayes, Jordie Shier, Chin-Yun Yu, David Südholt, Rodrigo Diaz
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2022.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=365ca57ee442770a23c6"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=365ca57ee442770a23c6"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>